"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n//import { cookies } from \"next/headers\";\nconst { cookies } = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n\nasync function middleware(request) {\n    const cookie = cookies().get(\"Authorization\");\n    if (!cookie) {\n        console.log(\"Authorization cookie not found. Redirecting to sign in.\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/signin\", request.url));\n    }\n    try {\n        console.log(\"Authorization cookie found. Value:\", cookie.value);\n        const res = await fetch(\"https://accountprovider-silicon-et.azurewebsites.net/api/VerifyToken?code=ts9Mdueq3B1n2AHdQhQr7RUufJL9jyGKCHX7MFusLGGqAzFu2UO7KA%3D%3D\", {\n            method: \"post\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${cookie.value}`\n            }\n        });\n        const responseBody = await res.text();\n        console.log(\"Response status from VerifyToken:\", res.status);\n        console.log(\"Response body from VerifyToken:\", responseBody);\n        if (res.status === 200) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next(); // Proceed with the original request\n        } else {\n            console.log(\"Token verification failed. Redirecting to sign in.\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/signin\", request.url));\n        }\n    } catch (error) {\n        console.error(\"Error during token verification:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/signin\", request.url));\n    }\n}\nconst config = {\n    matcher: \"/account/:path*\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSx5Q0FBeUM7QUFDekMsTUFBTSxFQUFFQSxPQUFPLEVBQUUsR0FBR0MsbUJBQU9BLENBQUMsOEVBQWM7QUFDYztBQUVqRCxlQUFlRSxXQUFXQyxPQUFvQjtJQUNuRCxNQUFNQyxTQUFTTCxVQUFVTSxHQUFHLENBQUM7SUFFN0IsSUFBSSxDQUFDRCxRQUFRO1FBQ1hFLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU9OLHFEQUFZQSxDQUFDTyxRQUFRLENBQUMsSUFBSUMsSUFBSSxXQUFXTixRQUFRTyxHQUFHO0lBQzdEO0lBRUEsSUFBSTtRQUNGSixRQUFRQyxHQUFHLENBQUMsc0NBQXNDSCxPQUFPTyxLQUFLO1FBRTlELE1BQU1DLE1BQU0sTUFBTUMsTUFBTSwwSUFBMEk7WUFDaEtDLFFBQVE7WUFDUkMsU0FBUztnQkFDUCxnQkFBZ0I7Z0JBQ2hCLGlCQUFpQixDQUFDLE9BQU8sRUFBRVgsT0FBT08sS0FBSyxDQUFDLENBQUM7WUFDM0M7UUFFRjtRQUVBLE1BQU1LLGVBQWUsTUFBTUosSUFBSUssSUFBSTtRQUNuQ1gsUUFBUUMsR0FBRyxDQUFDLHFDQUFxQ0ssSUFBSU0sTUFBTTtRQUMzRFosUUFBUUMsR0FBRyxDQUFDLG1DQUFtQ1M7UUFFL0MsSUFBSUosSUFBSU0sTUFBTSxLQUFLLEtBQUs7WUFDdEIsT0FBT2pCLHFEQUFZQSxDQUFDa0IsSUFBSSxJQUFJLG9DQUFvQztRQUNsRSxPQUFPO1lBQ0xiLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9OLHFEQUFZQSxDQUFDTyxRQUFRLENBQUMsSUFBSUMsSUFBSSxXQUFXTixRQUFRTyxHQUFHO1FBQzdEO0lBRUYsRUFBRSxPQUFPVSxPQUFPO1FBQ2RkLFFBQVFjLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU9uQixxREFBWUEsQ0FBQ08sUUFBUSxDQUFDLElBQUlDLElBQUksV0FBV04sUUFBUU8sR0FBRztJQUM3RDtBQUNGO0FBRU8sTUFBTVcsU0FBUztJQUNwQkMsU0FBUztBQUNYLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbWlkZGxld2FyZS50cz80MjJkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcclxuY29uc3QgeyBjb29raWVzIH0gPSByZXF1aXJlKFwibmV4dC9oZWFkZXJzXCIpO1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IGNvb2tpZSA9IGNvb2tpZXMoKS5nZXQoJ0F1dGhvcml6YXRpb24nKTtcclxuXHJcbiAgaWYgKCFjb29raWUpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiQXV0aG9yaXphdGlvbiBjb29raWUgbm90IGZvdW5kLiBSZWRpcmVjdGluZyB0byBzaWduIGluLlwiKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9zaWduaW5cIiwgcmVxdWVzdC51cmwpKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkF1dGhvcml6YXRpb24gY29va2llIGZvdW5kLiBWYWx1ZTpcIiwgY29va2llLnZhbHVlKTtcclxuXHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hY2NvdW50cHJvdmlkZXItc2lsaWNvbi1ldC5henVyZXdlYnNpdGVzLm5ldC9hcGkvVmVyaWZ5VG9rZW4/Y29kZT10czlNZHVlcTNCMW4yQUhkUWhRcjdSVXVmSkw5anlHS0NIWDdNRnVzTEdHcUF6RnUyVU83S0ElM0QlM0QnLCB7XHJcbiAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBCZWFyZXIgJHtjb29raWUudmFsdWV9YFxyXG4gICAgICB9LFxyXG4gICAgICAvLyBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHRva2VuOiBjb29raWUudmFsdWUgfSkgLy8gU2tpY2thIHRva2VuIGkgYm9keSwgZMOlIGJsZXYgZGV0IGZlbFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgIGNvbnNvbGUubG9nKFwiUmVzcG9uc2Ugc3RhdHVzIGZyb20gVmVyaWZ5VG9rZW46XCIsIHJlcy5zdGF0dXMpO1xyXG4gICAgY29uc29sZS5sb2coXCJSZXNwb25zZSBib2R5IGZyb20gVmVyaWZ5VG9rZW46XCIsIHJlc3BvbnNlQm9keSk7XHJcblxyXG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTsgLy8gUHJvY2VlZCB3aXRoIHRoZSBvcmlnaW5hbCByZXF1ZXN0XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlRva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQuIFJlZGlyZWN0aW5nIHRvIHNpZ24gaW4uXCIpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvc2lnbmluXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyB0b2tlbiB2ZXJpZmljYXRpb246XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9zaWduaW5cIiwgcmVxdWVzdC51cmwpKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgbWF0Y2hlcjogXCIvYWNjb3VudC86cGF0aCpcIlxyXG59XHJcbiJdLCJuYW1lcyI6WyJjb29raWVzIiwicmVxdWlyZSIsIk5leHRSZXNwb25zZSIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwiY29va2llIiwiZ2V0IiwiY29uc29sZSIsImxvZyIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwidmFsdWUiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJyZXNwb25zZUJvZHkiLCJ0ZXh0Iiwic3RhdHVzIiwibmV4dCIsImVycm9yIiwiY29uZmlnIiwibWF0Y2hlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});
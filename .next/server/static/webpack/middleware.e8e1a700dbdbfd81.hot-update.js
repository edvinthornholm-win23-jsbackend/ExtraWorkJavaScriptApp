"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(middleware)/./node_modules/next/dist/esm/api/headers.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nasync function middleware(request) {\n    const cookie = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(\"Authorization\");\n    if (!cookie) {\n        console.log(\"Authorization cookie not found. Redirecting to sign in.\");\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/signin\", request.url));\n    }\n    try {\n        console.log(\"Authorization cookie found. Value:\", cookie.value);\n        const res = await fetch(\"https://accountprovider-silicon-et.azurewebsites.net/api/VerifyToken?code=ts9Mdueq3B1n2AHdQhQr7RUufJL9jyGKCHX7MFusLGGqAzFu2UO7KA%3D%3D\", {\n            method: \"post\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                token: cookie.value\n            }) // Skicka token i body\n        });\n        const responseBody = await res.text();\n        console.log(\"Response status from VerifyToken:\", res.status);\n        console.log(\"Response body from VerifyToken:\", responseBody);\n        if (res.status === 200) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next(); // Proceed with the original request\n        } else {\n            console.log(\"Token verification failed. Redirecting to sign in.\");\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/signin\", request.url));\n        }\n    } catch (error) {\n        console.error(\"Error during token verification:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL(\"/signin\", request.url));\n    }\n}\nconst config = {\n    matcher: \"/account/:path*\"\n} // import { cookies } from \"next/headers\";\n // import { NextRequest, NextResponse } from \"next/server\";\n // export async function middleware(request: NextRequest) {\n //   const cookie = cookies().get('Authorization');\n //   if (!cookie) {\n //     return NextResponse.redirect(new URL(\"/signin\", request.url));\n //   }\n //   try {\n //     const res = await fetch('http://localhost:7226/api/VerifyToken', {\n //       method: 'post',\n //       headers: {\n //         \"Authorization\": `bearer ${cookie.value}`\n //       }\n //     })\n //     if (res.status === 200) \n //       NextResponse.redirect(request.url)\n //     else \n //       return NextResponse.redirect(new URL(\"/signin\", request.url));\n //   } catch (error) {\n //     return NextResponse.redirect(new URL(\"/signin\", request.url));\n //   }\n // }\n // export const config = {\n //   matcher: \"/account/:path*\"\n // }\n // import { NextRequest, NextResponse } from \"next/server\";\n // export async function middleware(request: NextRequest) {\n //   const cookie = request.cookies.get('Authorization');\n //   if (!cookie) {\n //     return NextResponse.redirect(new URL('/signin', request.url));\n //   }\n //   try {\n //     const res = await fetch('https://accountprovider-silicon-et.azurewebsites.net/api/VerifyToken?code=ts9Mdueq3B1n2AHdQhQr7RUufJL9jyGKCHX7MFusLGGqAzFu2UO7KA%3D%3D', {\n //       method: 'POST',\n //       headers: {\n //         \"Authorization\": `Bearer ${cookie}`\n //       }\n //     });\n //     if (res.status === 200) {\n //       return NextResponse.next();\n //     } else {\n //       return NextResponse.redirect(new URL('/signin', request.url));\n //     }\n //   } catch (error) {\n //     return NextResponse.redirect(new URL(\"/signin\", request.url));\n //   }\n // }\n // export const config = {\n //   matcher: \"/account/:path*\"\n // }\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVDO0FBQ2lCO0FBRWpELGVBQWVFLFdBQVdDLE9BQW9CO0lBQ25ELE1BQU1DLFNBQVNKLHFEQUFPQSxHQUFHSyxHQUFHLENBQUM7SUFFN0IsSUFBSSxDQUFDRCxRQUFRO1FBQ1hFLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU9OLHFEQUFZQSxDQUFDTyxRQUFRLENBQUMsSUFBSUMsSUFBSSxXQUFXTixRQUFRTyxHQUFHO0lBQzdEO0lBRUEsSUFBSTtRQUNGSixRQUFRQyxHQUFHLENBQUMsc0NBQXNDSCxPQUFPTyxLQUFLO1FBRTlELE1BQU1DLE1BQU0sTUFBTUMsTUFBTSwwSUFBMEk7WUFDaEtDLFFBQVE7WUFDUkMsU0FBUztnQkFDUCxnQkFBZ0I7WUFDbEI7WUFDQUMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUFFQyxPQUFPZixPQUFPTyxLQUFLO1lBQUMsR0FBRyxzQkFBc0I7UUFDdEU7UUFFQSxNQUFNUyxlQUFlLE1BQU1SLElBQUlTLElBQUk7UUFDbkNmLFFBQVFDLEdBQUcsQ0FBQyxxQ0FBcUNLLElBQUlVLE1BQU07UUFDM0RoQixRQUFRQyxHQUFHLENBQUMsbUNBQW1DYTtRQUUvQyxJQUFJUixJQUFJVSxNQUFNLEtBQUssS0FBSztZQUN0QixPQUFPckIscURBQVlBLENBQUNzQixJQUFJLElBQUksb0NBQW9DO1FBQ2xFLE9BQU87WUFDTGpCLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU9OLHFEQUFZQSxDQUFDTyxRQUFRLENBQUMsSUFBSUMsSUFBSSxXQUFXTixRQUFRTyxHQUFHO1FBQzdEO0lBRUYsRUFBRSxPQUFPYyxPQUFPO1FBQ2RsQixRQUFRa0IsS0FBSyxDQUFDLG9DQUFvQ0E7UUFDbEQsT0FBT3ZCLHFEQUFZQSxDQUFDTyxRQUFRLENBQUMsSUFBSUMsSUFBSSxXQUFXTixRQUFRTyxHQUFHO0lBQzdEO0FBQ0Y7QUFFTyxNQUFNZSxTQUFTO0lBQ3BCQyxTQUFTO0FBQ1gsRUFJQSwwQ0FBMEM7Q0FDMUMsMkRBQTJEO0NBRTNELDJEQUEyRDtDQUMzRCxtREFBbUQ7Q0FFbkQsbUJBQW1CO0NBQ25CLHFFQUFxRTtDQUNyRSxNQUFNO0NBRU4sVUFBVTtDQUNWLHlFQUF5RTtDQUN6RSx3QkFBd0I7Q0FDeEIsbUJBQW1CO0NBQ25CLG9EQUFvRDtDQUNwRCxVQUFVO0NBQ1YsU0FBUztDQUVULCtCQUErQjtDQUMvQiwyQ0FBMkM7Q0FDM0MsWUFBWTtDQUNaLHVFQUF1RTtDQUV2RSxzQkFBc0I7Q0FDdEIscUVBQXFFO0NBQ3JFLE1BQU07Q0FDTixJQUFJO0NBRUosMEJBQTBCO0NBQzFCLCtCQUErQjtDQUMvQixJQUFJO0NBSUosMkRBQTJEO0NBRTNELDJEQUEyRDtDQUMzRCx5REFBeUQ7Q0FFekQsbUJBQW1CO0NBQ25CLHFFQUFxRTtDQUNyRSxNQUFNO0NBRU4sVUFBVTtDQUNWLDBLQUEwSztDQUMxSyx3QkFBd0I7Q0FDeEIsbUJBQW1CO0NBQ25CLDhDQUE4QztDQUM5QyxVQUFVO0NBQ1YsVUFBVTtDQUVWLGdDQUFnQztDQUNoQyxvQ0FBb0M7Q0FDcEMsZUFBZTtDQUNmLHVFQUF1RTtDQUN2RSxRQUFRO0NBQ1Isc0JBQXNCO0NBQ3RCLHFFQUFxRTtDQUNyRSxNQUFNO0NBQ04sSUFBSTtDQUVKLDBCQUEwQjtDQUMxQiwrQkFBK0I7Q0FDL0IsSUFBSTtDQW5FSCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLnRzPzQyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zdCBjb29raWUgPSBjb29raWVzKCkuZ2V0KCdBdXRob3JpemF0aW9uJyk7XHJcblxyXG4gIGlmICghY29va2llKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkF1dGhvcml6YXRpb24gY29va2llIG5vdCBmb3VuZC4gUmVkaXJlY3RpbmcgdG8gc2lnbiBpbi5cIik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvc2lnbmluXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coXCJBdXRob3JpemF0aW9uIGNvb2tpZSBmb3VuZC4gVmFsdWU6XCIsIGNvb2tpZS52YWx1ZSk7XHJcblxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYWNjb3VudHByb3ZpZGVyLXNpbGljb24tZXQuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL1ZlcmlmeVRva2VuP2NvZGU9dHM5TWR1ZXEzQjFuMkFIZFFoUXI3UlV1ZkpMOWp5R0tDSFg3TUZ1c0xHR3FBekZ1MlVPN0tBJTNEJTNEJywge1xyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdG9rZW46IGNvb2tpZS52YWx1ZSB9KSAvLyBTa2lja2EgdG9rZW4gaSBib2R5XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCByZXNwb25zZUJvZHkgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gICAgY29uc29sZS5sb2coXCJSZXNwb25zZSBzdGF0dXMgZnJvbSBWZXJpZnlUb2tlbjpcIiwgcmVzLnN0YXR1cyk7XHJcbiAgICBjb25zb2xlLmxvZyhcIlJlc3BvbnNlIGJvZHkgZnJvbSBWZXJpZnlUb2tlbjpcIiwgcmVzcG9uc2VCb2R5KTtcclxuXHJcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpOyAvLyBQcm9jZWVkIHdpdGggdGhlIG9yaWdpbmFsIHJlcXVlc3RcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZC4gUmVkaXJlY3RpbmcgdG8gc2lnbiBpbi5cIik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9zaWduaW5cIiwgcmVxdWVzdC51cmwpKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIHRva2VuIHZlcmlmaWNhdGlvbjpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL3NpZ25pblwiLCByZXF1ZXN0LnVybCkpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBtYXRjaGVyOiBcIi9hY2NvdW50LzpwYXRoKlwiXHJcbn1cclxuXHJcblxyXG5cclxuLy8gaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcclxuLy8gaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuLy8gICBjb25zdCBjb29raWUgPSBjb29raWVzKCkuZ2V0KCdBdXRob3JpemF0aW9uJyk7XHJcblxyXG4vLyAgIGlmICghY29va2llKSB7XHJcbi8vICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvc2lnbmluXCIsIHJlcXVlc3QudXJsKSk7XHJcbi8vICAgfVxyXG5cclxuLy8gICB0cnkge1xyXG4vLyAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6NzIyNi9hcGkvVmVyaWZ5VG9rZW4nLCB7XHJcbi8vICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4vLyAgICAgICBoZWFkZXJzOiB7XHJcbi8vICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBiZWFyZXIgJHtjb29raWUudmFsdWV9YFxyXG4vLyAgICAgICB9XHJcbi8vICAgICB9KVxyXG5cclxuLy8gICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIFxyXG4vLyAgICAgICBOZXh0UmVzcG9uc2UucmVkaXJlY3QocmVxdWVzdC51cmwpXHJcbi8vICAgICBlbHNlIFxyXG4vLyAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvc2lnbmluXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgICBcclxuLy8gICB9IGNhdGNoIChlcnJvcikge1xyXG4vLyAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL3NpZ25pblwiLCByZXF1ZXN0LnVybCkpO1xyXG4vLyAgIH1cclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuLy8gICBtYXRjaGVyOiBcIi9hY2NvdW50LzpwYXRoKlwiXHJcbi8vIH1cclxuXHJcblxyXG5cclxuLy8gaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuLy8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuLy8gICBjb25zdCBjb29raWUgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KCdBdXRob3JpemF0aW9uJyk7XHJcblxyXG4vLyAgIGlmICghY29va2llKSB7XHJcbi8vICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9zaWduaW4nLCByZXF1ZXN0LnVybCkpO1xyXG4vLyAgIH1cclxuXHJcbi8vICAgdHJ5IHtcclxuLy8gICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FjY291bnRwcm92aWRlci1zaWxpY29uLWV0LmF6dXJld2Vic2l0ZXMubmV0L2FwaS9WZXJpZnlUb2tlbj9jb2RlPXRzOU1kdWVxM0IxbjJBSGRRaFFyN1JVdWZKTDlqeUdLQ0hYN01GdXNMR0dxQXpGdTJVTzdLQSUzRCUzRCcsIHtcclxuLy8gICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbi8vICAgICAgIGhlYWRlcnM6IHtcclxuLy8gICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke2Nvb2tpZX1gXHJcbi8vICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG5cclxuLy8gICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcclxuLy8gICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9zaWduaW4nLCByZXF1ZXN0LnVybCkpO1xyXG4vLyAgICAgfVxyXG4vLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvc2lnbmluXCIsIHJlcXVlc3QudXJsKSk7XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4vLyAgIG1hdGNoZXI6IFwiL2FjY291bnQvOnBhdGgqXCJcclxuLy8gfVxyXG4iXSwibmFtZXMiOlsiY29va2llcyIsIk5leHRSZXNwb25zZSIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwiY29va2llIiwiZ2V0IiwiY29uc29sZSIsImxvZyIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwidmFsdWUiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRva2VuIiwicmVzcG9uc2VCb2R5IiwidGV4dCIsInN0YXR1cyIsIm5leHQiLCJlcnJvciIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});